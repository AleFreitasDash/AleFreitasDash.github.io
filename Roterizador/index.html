<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Aplicativo de Roteamento com Capacidade de Veículo</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container mt-5">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h1 class="h4 text-center">Calculadora de Rotas com Capacidade de Veículo</h1>
        </div>
        <div class="card-body">
            <form id="routeForm" onsubmit="return false;">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="origin">Origem:</label>
                            <input type="text" class="form-control" id="origin" placeholder="Digite o endereço de origem">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="vehicleType">Tipo de Veículo:</label>
                            <select class="form-control" id="vehicleType">
                                <option value="">Selecione um veículo</option>
                                <option value="Fiorino">Fiorino (Capacidade: 500 kg)</option>
                                <option value="Van">Van (Capacidade: 1500 kg)</option>
                                <option value="Vuc">Vuc (Capacidade: 2200 kg)</option>
                                <option value="34">Vuc (Capacidade: 3200 kg)</option>
                                <option value="Toco">Toco (Capacidade: 6800 kg)</option>
                                <option value="Truck">Truck (Capacidade: 12000 kg)</option>
                                <option value="Bitruck">Bitruck (Capacidade: 18000 kg)</option>
                                <option value="Carreta">Carreta (Capacidade: 27000 kg)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="destinations">Destinos e Pesos (um por linha, formato: Destino;Peso em kg):</label>
                    <textarea class="form-control" id="destinations" rows="5" placeholder="Exemplo: São Paulo;100"></textarea>
                </div>
                <div class="form-group">
                    <label for="fileUpload">Ou faça upload de um arquivo XLSX com destinos e pesos:</label>
                    <input type="file" class="form-control-file" id="fileUpload" accept=".xlsx">
                </div>
                <div class="form-group">
                    <label for="numRoutes">Quantidade de Rotas:</label>
                    <input type="number" class="form-control" id="numRoutes" min="1" value="1">
                </div>
                <button type="submit" class="btn btn-primary btn-block" id="calculateRoutesButton">Calcular Rotas</button>
            </form>
        </div>
    </div>

    <div id="map" class="my-4"></div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-secondary text-white">
            <h2 class="h5 text-center">Resultados</h2>
        </div>
        <div class="card-body">
            <table class="table table-striped" id="resultsTable">
                <thead class="thead-dark">
                    <tr>
                        <th>Rota</th>
                        <th>Sequência de Entrega</th>
                        <th>Origem</th>
                        <th>Destino</th>
                        <th>Peso (kg)</th>
                        <th>KM</th>
                        <th>Tipo de Veículo</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Resultados serão inseridos aqui -->
                </tbody>
            </table>

            <div class="d-flex justify-content-between">
                <button class="btn btn-success" id="downloadXLSX">Download XLS</button>
                <button class="btn btn-danger" id="downloadPDF">Download PDF</button>
                <button class="btn btn-secondary" id="downloadTXT">Download TXT</button>
            </div>
        </div>
    </div>
</div>

<!-- jQuery, Popper.js, Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- jsPDF AutoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
<!-- SheetJS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<!-- FileSaver.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<!-- Custom JS -->
<script src="app.js"></script>

<script>
    $(document).ready(function() {
        $('#routeForm').on('submit', function(event) {
            event.preventDefault(); // Prevenir o recarregamento da página ao enviar o formulário
            calculateRoutes(); // Função para calcular rotas
        });
    });
</script>

</body>
</html>
